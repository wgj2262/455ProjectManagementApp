language: ruby
rvm:
  - 2.4.1
env:
  - DB=pgsql

services:
  - postgresql

script:
  - RAILS_ENV=test bundle exec rake db:migrate --trace

before_script:
  - cp config/database.yml.travis config/database.yml
  - psql -c 'create database crdcprojectmanagement_test;' -U postgres

deploy:
  provider: heroku
  api_key:
    secure: OiBkOFjIwX/AsF6s8bmYSXXCHsUlgZz5xd2t7ZP/AWtpD5/svSu0r9QIEddaLdPQyA0pzCvXC///iNFtIxBYxQOwAuilgqcdZp0nIFswzg7qgdsdW3zOAlEwsF+y8peDKpoqKtEvPTpIzm59EEISTG6IrtEH48jhZE9JVBvSvFu+TLdANYIiC4arGuPsOg+X3y3n4IDV6+2ErkPeHvB6SF7AaxqdzyB2xoOnHcih7d2Z7ft+gGXPcRVvWCDvuSiL22AeA3p9ZI9JND8s6c/dznquuU/sDL9YUcICgzI9XID6joav3vL6XlvnP6auriTp7QbrshKfb4xOgeV36YahB+AUMKqBzBB4P3jAGSnv9aDyMLAzOHusNkRKsnf9UHiigDvLGry4OW54XEmBBS4uMfXv/GPXRGSXHRJK416vVFO2jZWtiLS4Gb7krietiiM3NZi2QlpeYQYZXWfmVFieFQvFcoGI6wKi9eQHhiYvOOfJcgzApyLz5jBgES4YXsoLDWsf0aWQteZV5TEIjfsIEA6DCOAOtDLs3y4wNsZ/yeHiyI+4ZYID3Ynb9epHlWLu9lWlCvHhRecEgIEKEKmk5OaTHmKBVvXtVdcp5EiIHLZ9y52W6Rxyazojn+2MUQOtD/c0D50QqaoLJrF6V64IJvnHixMbFNgilXd13Ulo8M8=
  app: crdc-project-management
  on:
    repo: andrewmcodes/455ProjectManagementApp
